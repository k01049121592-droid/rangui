# 🚇 서울 지하철 혼잡도 대시보드

서울교통공사의 지하철 혼잡도 데이터를 시각화하고 분석하는 Streamlit 기반 대시보드입니다.

## ✨ 주요 기능

### 📊 기본 분석 (페이즈 2)
- **필터링**: 요일, 호선, 역, 방향, 시간대별 데이터 필터링
- **핵심 지표 (KPI)**: 최대 혼잡도, 피크 시간대, 평균 혼잡도
- **시각화**: 시간대별 혼잡도 추이 라인 차트
- **TOP 구간**: 혼잡도 상위 10개 구간 테이블
- **데이터 내보내기**: CSV 다운로드 기능

### 🔄 비교 및 인사이트 (페이즈 3) ✨ NEW!
- **⏰ 시간대 프리셋**: 출근(07:00-09:00), 퇴근(18:00-20:00), 전체 시간대 빠른 선택
- **⚖️ 방향별 비교**: 선택한 역의 상행/하행(내선/외선) 혼잡도 동시 비교
- **🚇 호선별 비교**: 여러 호선의 평균 혼잡도를 시간대별로 비교
- **🔝 TOP N 기준 선택**: 
  - 피크(최대) 혼잡도 기준
  - 평균 혼잡도 기준
  - 특정 시간대 혼잡도 기준

## 🚀 설치 및 실행

### 필수 요구사항
- Python 3.8 이상
- pip (Python 패키지 관리자)

### 설치 방법

```bash
# 저장소 클론 (또는 다운로드)
git clone <repository-url>
cd rangui-1

# 의존성 설치
pip install -r requirements.txt
```

### 실행 방법

```bash
# Streamlit 앱 실행
streamlit run app.py

# 또는 특정 포트 지정
streamlit run app.py --server.port=8501
```

브라우저에서 자동으로 열리지 않는 경우, `http://localhost:8501`로 접속하세요.

## 📁 프로젝트 구조

```
rangui-1/
│
├── app.py                                   # 메인 Streamlit 애플리케이션
├── requirements.txt                          # Python 의존성 패키지
├── README.md                                # 프로젝트 문서
├── STREAMLIT_DASHBOARD_PLAN.md              # 개발 계획서
└── 서울교통공사_지하철혼잡도정보_20250930.csv  # 데이터 파일
```

## 📊 데이터 구조

### 입력 데이터
- **파일 형식**: CSV (UTF-8 또는 CP949 인코딩)
- **데이터 구조**: 
  - 요일구분 (평일/주말)
  - 호선 (1호선~8호선)
  - 역번호, 출발역
  - 상하구분 (상행/하행, 내선/외선)
  - 시간대별 혼잡도 (5시30분~00시30분, 30분 간격)

### 데이터 전처리
- 와이드 포맷 → 롱 포맷 변환
- 시간 문자열 정규화 (예: "5시30분" → "05:30")
- 혼잡도 값 타입 정리 및 NaN 처리
- 캐싱을 통한 성능 최적화 (`@st.cache_data`)

## 🎯 사용 가이드

### 1. 기본 필터 설정
왼쪽 사이드바에서:
- **요일구분**: 평일/주말 선택
- **호선**: 분석할 호선 선택
- **역**: 특정 역 선택
- **방향**: 상행/하행(내선/외선) 선택

### 2. 시간대 선택
- **프리셋 버튼**: 출근/퇴근/전체 버튼으로 빠른 선택
- **슬라이더**: 세밀한 시간대 범위 조정

### 3. 호선 비교
- 사이드바 하단의 "비교할 호선 선택"에서 여러 호선 선택
- 메인 화면에 호선별 평균 혼잡도 비교 차트 표시

### 4. TOP 구간 분석
- **피크**: 최대 혼잡도가 높은 구간
- **평균**: 평균적으로 혼잡한 구간
- **특정 시간대**: 특정 시간의 혼잡 구간

## 📈 혼잡도 해석

| 혼잡도 범위 | 상태 | 설명 |
|------------|------|------|
| 100 이상 | 🔴 매우 혼잡 | 승객이 많아 불편할 수 있음 |
| 60-100 | 🟡 보통 혼잡 | 일부 서서 가는 승객 있음 |
| 30-60 | 🟢 여유 있음 | 대부분 앉아서 이동 가능 |
| 0-30 | 🔵 매우 여유로움 | 충분한 좌석 여유 |

**참고**: 0.0 값은 해당 시간대에 미운행 또는 미집계된 데이터일 수 있습니다.

## 🛠️ 기술 스택

- **Python 3.8+**
- **Streamlit**: 웹 대시보드 프레임워크
- **Pandas**: 데이터 처리 및 분석
- **Altair**: 인터랙티브 차트 시각화

## 📝 개발 단계

- ✅ **페이즈 0**: 설계 및 정의 확정
- ✅ **페이즈 1**: 데이터 로드 및 전처리 모듈화
- ✅ **페이즈 2**: Streamlit MVP UI 구현
- ✅ **페이즈 3**: 인사이트/비교 기능 확장 (현재)
- 🔜 **페이즈 4**: UX/성능/안정화
- 🔜 **페이즈 5**: 운영/확장 (선택)

## 🤝 기여하기

프로젝트 개선을 위한 기여를 환영합니다!

1. Fork the Project
2. Create your Feature Branch (`git checkout -b feature/AmazingFeature`)
3. Commit your Changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the Branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## 📄 라이선스

이 프로젝트는 MIT 라이선스 하에 있습니다.

## 📧 문의

프로젝트에 대한 문의사항이 있으시면 이슈를 등록해주세요.

---

**데이터 출처**: 서울교통공사 지하철 혼잡도 정보 (2025년 9월 30일 기준)
